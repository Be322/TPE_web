<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Pedidos</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>

    <nav class="menu-superior">
        <div class="menu-container">
            <div class="logo">
                <span class="material-icons">shopping_cart</span>
                Mini Cardápio
            </div>
            <ul class="menu-items">
                <li><a href="index.html"><span class="material-icons">home</span> Início</a></li>
                <li><a href="cardapio.html"><span class="material-icons">restaurant</span> Cardápio</a></li>
                <li><a class="active" href="pedido.html"><span class="material-icons">shopping_cart</span> Pedido</a></li>
                <li><a href="comanda.html"><span class="material-icons">receipt_long</span> Comanda</a></li>
                <li><a href="cadastro_cardapio.html"><span class="material-icons">add_box</span> Cadastrar Item</a></li>
            </ul>
        </div>
    </nav>

    <h1>Pedidos</h1>

    <div id="lista-pedidos"></div>

    <script>
        async function carregarPedidos() {
            const div = document.getElementById("lista-pedidos");
            div.innerHTML = "<p>Carregando...</p>";

            try {
                const res = await fetch("/api/pedido");
                const pedidos = await res.json();

                div.innerHTML = "";

                if (pedidos.length === 0) {
                    div.innerHTML = "<p>Nenhum pedido encontrado.</p>";
                    return;
                }

                pedidos.forEach(p => {
                    const item = document.createElement("div");
                    item.className = "item-cardapio";

                    item.innerHTML = `
                        <strong>Pedido #${p.id}</strong>
                        <p>Mesa: ${p.mesa}</p>
                        <p>Total: R$ ${p.total.toFixed(2)}</p>
                        <p>Status: ${p.status}</p>
                    `;

                    div.appendChild(item);
                });

            } catch {
                div.innerHTML = "<p>Erro ao carregar pedidos.</p>";
            }
        }

        carregarPedidos();
    </script>

</body>
</html>
